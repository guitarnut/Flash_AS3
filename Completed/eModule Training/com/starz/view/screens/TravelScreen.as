package com.starz.view.screens{	import com.starz.view.components.SimpleMC;	import flash.events.MouseEvent;	import flash.display.MovieClip;	import com.starz.events.TrainingEvent;	import com.starz.constants.ApplicationSettings;	import flash.events.Event;	import com.greensock.TweenLite;	public class TravelScreen extends SimpleMC	{		private var _l1_complete:Boolean = false;		private var _l2_complete:Boolean = false;		private var _l3_complete:Boolean = false;		private var _promotionPlayed:Boolean = false;		private var _complete:Boolean = false;		public function TravelScreen()		{			init();		}		private function init():void		{			b_location1.completed.visible = false;			b_location2.completed.visible = false;			b_location3.completed.visible = false;			b_location1.showButton();			b_location2.showButton();			b_location3.showButton();			addListeners();			x = ApplicationSettings.STAGE_WIDTH / 2;			y = ApplicationSettings.STAGE_HEIGHT / 2;		}		private function addListeners():void		{			b_location1.addEventListener(MouseEvent.CLICK, handleButtonClick);			b_location2.addEventListener(MouseEvent.CLICK, handleButtonClick);			b_location3.addEventListener(MouseEvent.CLICK, handleButtonClick);			b_end.addEventListener(MouseEvent.CLICK, handleButtonClick);		}		private function checkStatus():void		{			if (_l1_complete)			{				b_location1.completed.visible = true;			}			if (_l2_complete)			{				b_location2.completed.visible = true;			}			if (_l3_complete)			{				b_location3.completed.visible = true;			}			if ((_l1_complete)&&(_l2_complete)&&(_l3_complete))			{				_complete = true;				allAccess();			}		}		private function handleButtonClick(e:MouseEvent):void		{			switch (e.target.name)			{				case 'b_location1' :					dispatchEvent(new TrainingEvent(TrainingEvent.GOTO_LOCATION_ONE));					break;				case 'b_location2' :					dispatchEvent(new TrainingEvent(TrainingEvent.GOTO_LOCATION_TWO));					break;				case 'b_location3' :					dispatchEvent(new TrainingEvent(TrainingEvent.GOTO_LOCATION_THREE));					break;				case 'b_end' :					dispatchEvent(new TrainingEvent(TrainingEvent.GOTO_END_SCREEN));					break;			}			hideMC();		}		private function allAccess():void		{			b_end.showButton();		}		override public function showMC(d$:Number = 0):void		{			checkStatus();			//If not all sections are complete, show the menu			if (! _complete)			{				visible = true;				new TweenLite(this,TWEEN_SPEED,{alpha:1,delay:d$});			}			//If all sections are finished and the player is just revisiting a section, don't play the promo			if ((_complete)&&(_promotionPlayed))			{				visible = true;				new TweenLite(this,TWEEN_SPEED,{alpha:1,delay:d$});			}			//If they finished all sections but haven't seen the promo, play it			if ((_complete)&&(!_promotionPlayed))			{				dispatchEvent(new TrainingEvent(TrainingEvent.GOTO_PROMOTION_ONE, true, true));			}		}		public function get complete():Boolean		{			return _complete;		}		public function set location1($b:Boolean):void		{			_l1_complete = $b;		}		public function set location2($b:Boolean):void		{			_l2_complete = $b;		}		public function set location3($b:Boolean):void		{			_l3_complete = $b;		}		public function set promotion($b:Boolean):void		{			_promotionPlayed = $b;		}	}}