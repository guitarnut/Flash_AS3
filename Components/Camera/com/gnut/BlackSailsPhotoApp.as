package com.gnut{	import flash.display.MovieClip;	import com.gnut.camera.UserCamera;	import flash.events.MouseEvent;	import com.gnut.view.images.ImageFilter;	import fl.events.SliderEvent;	import fl.controls.Slider;	import com.greensock.TweenLite;	import com.gnut.view.interactive.ImageAdjustMenu;	import flash.display.BitmapData;	import flash.display.Bitmap;	import com.facebook.graph.Facebook;	public class BlackSailsPhotoApp extends MovieClip	{		private var _camera:UserCamera;		private var _filter:ImageFilter;		private var _image:MovieClip;		private var _aMenu:ImageAdjustMenu;		public function BlackSailsPhotoApp()		{			init();		}		private function init():void		{			_aMenu = new ImageAdjustMenu();			_aMenu.x = 405;			_aMenu.y = 700;			addChild(_aMenu);			_camera = new UserCamera(800,500);			_camera.x = stage.stageWidth / 2 - _camera.width / 2;			_camera.y = stage.stageHeight / 2 - _camera.height / 2;			addChildAt(_camera,0);			capture.addEventListener(MouseEvent.CLICK, grab);			share.addEventListener(MouseEvent.CLICK, shareImage);			_filter = new ImageFilter();			addListeners();		}		private function addListeners():void		{			_aMenu.s_brightness.addEventListener(SliderEvent.THUMB_DRAG, updateImage);			_aMenu.s_contrast.addEventListener(SliderEvent.THUMB_DRAG, updateImage);			_aMenu.s_x.addEventListener(SliderEvent.THUMB_DRAG, updateImage);			_aMenu.s_y.addEventListener(SliderEvent.THUMB_DRAG, updateImage);			_aMenu.s_xscale.addEventListener(SliderEvent.THUMB_DRAG, updateImage);			_aMenu.s_yscale.addEventListener(SliderEvent.THUMB_DRAG, updateImage);		}		private function grab(e:*):void		{			_camera.captureImage();			_image = _camera.image;			_image.x = stage.stageWidth / 2 - _image.width / 2;			_image.y = stage.stageHeight / 2 - _image.height / 2 - 250;			removeChild(_camera);			_filter.image = _image;			updateImage();			addChildAt(new TitleArt(), 0);			addChildAt(_image, 0);			showImageMenu();		}		private function updateImage(e:SliderEvent=null):void		{			_filter.updateImage(Slider(_aMenu.s_brightness).value,Slider(_aMenu.s_contrast).value,0,-100);			_image.x = Slider(_aMenu.s_x).value - _image.width / 2;			_image.y = Slider(_aMenu.s_y).value - _image.height / 2;			_image.scaleX = Slider(_aMenu.s_xscale).value;			_image.scaleY = Slider(_aMenu.s_yscale).value;		}		private function showImageMenu():void		{			_aMenu.showMenu();		}		private function shareImage(e:MouseEvent):void		{			Facebook.init('599026140108657', loginReady);					}		private function loginReady():void		{			var sharedImage:BitmapData = new BitmapData(stage.width,stage.height);			sharedImage.draw(stage);			var bitmap:Bitmap = new Bitmap(sharedImage);			var values:Object = {message:'hello',image:bitmap};			var params:Object = {image:bitmap, message:'Test Photo', fileName:'FILE_NAME'};	    	Facebook.api('me/photos', onSaveToPhotoAlbumComplete, params);		}		private function onSaveToPhotoAlbumComplete():void 		{					}	}}